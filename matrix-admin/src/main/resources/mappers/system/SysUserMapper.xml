<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.matrix.admin.system.mappers.SysUserMapper">

    <select id="queryByUsername" resultType="com.matrix.common.pojo.system.SysUser" parameterType="string">
        SELECT
            id,username,password,phone,nick_name,real_name,avatar_file_id,user_type,remarks,create_id,create_time,update_id,update_time
        FROM sys_user
        WHERE username = #{username} AND deleted = 0
        LIMIT 1
    </select>
    <select id="queryAllUser" resultType="com.matrix.common.pojo.system.SysUser">
        SELECT
            id,username,password,phone,nick_name,real_name,avatar_file_id,user_type,remarks,create_id,create_time,update_id,update_time
        FROM sys_user
        WHERE deleted = 0
    </select>


    <resultMap id="SysUserVoResult" type="com.matrix.common.vo.system.SysUserVo">
        <result property="id" column="id"/>
        <result property="username" column="username"/>
        <result property="nickName" column="nick_name"/>
        <result property="phone" column="phone"/>
        <result property="realName" column="real_name"/>
        <result property="userType" column="user_type"/>
        <result property="createTime" column="create_time"/>
        <result property="updateTime" column="update_time"/>
    </resultMap>
    <select id="queryUserList" resultMap="SysUserVoResult">
        select id, username, nick_name, phone, real_name, user_type, create_time, update_time
        from sys_user
        where
            deleted = 0
            <if test="queryParam.username != null and queryParam.username != '' ">
                and username like concat('%',#{queryParam.username},'%');
            </if>
    </select>
</mapper>